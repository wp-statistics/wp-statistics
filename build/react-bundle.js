(()=>{"use strict";const e=window.React,t=window.wp.element,i=window.wp.components,s=window.wp.i18n,a=({handleStep:a})=>{const[r,n]=(0,t.useState)(""),[o,l]=(0,t.useState)({}),[c,d]=(0,t.useState)("0"),p=localStorage.getItem("wps_migration_option");return(0,t.useEffect)((()=>{const e=JSON.parse(p);Boolean(e)?(l(e),n(e?.type),"hybrid"==e?.type&&d(e?.days||"0")):n("full-detailed")}),[p]),(0,e.createElement)(i.Card,null,(0,e.createElement)(i.CardBody,null,(0,e.createElement)(i.__experimentalHeading,{style:{fontFamily:500,fontSize:24,lineHeight:1.3,marginTop:"8px"}},(0,s.__)("We’ve updated WP Statistics to use a faster, more efficient database structure!","wp-statistics")),(0,e.createElement)("p",{style:{color:"#56585A",fontSize:16}},(0,s.__)("By running this migration, you’ll safely move all your","wp-statistics")," ",(0,e.createElement)("span",{style:{color:"#000"}},(0,s.__)("older stats","wp-statistics"))," ",(0,s.__)("into the new system. Any visits recorded","wp-statistics")," ",(0,e.createElement)("span",{style:{color:"#000"}},(0,s.__)("after","wp-statistics"))," ",(0,s.__)("your update are already being stored in the new format, so you won’t lose any current data","wp-statistics")),(0,e.createElement)("div",{style:{backgroundColor:"#F6FAFF",border:"1px solid #4FA1FF66",borderRadius:"8px",padding:"16px",margin:"16px 0px",display:"flex",alignItems:"start",gap:8}},(0,e.createElement)("div",null,(0,e.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTcuNTAxMDYgMTQuNTg0NkMzLjU4OTA0IDE0LjU4NDYgMC40MTc3MjUgMTEuNDEzMyAwLjQxNzcyNSA3LjUwMTNDMC40MTc3MjUgMy41ODkyOCAzLjU4OTA0IDAuNDE3OTY5IDcuNTAxMDYgMC40MTc5NjlDMTEuNDEzIDAuNDE3OTY5IDE0LjU4NDQgMy41ODkyOCAxNC41ODQ0IDcuNTAxM0MxNC41ODQ0IDExLjQxMzMgMTEuNDEzIDE0LjU4NDYgNy41MDEwNiAxNC41ODQ2Wk02Ljc5MjczIDYuNzkyOTdWMTEuMDQzSDguMjA5MzlWNi43OTI5N0g2Ljc5MjczWk02Ljc5MjczIDMuOTU5NjRWNS4zNzYzSDguMjA5MzlWMy45NTk2NEg2Ljc5MjczWiIgZmlsbD0iIzMwODhFQyIvPgo8L3N2Zz4K",style:{width:"20px",height:"20px",marginTop:5},alt:"info-icon"})),(0,e.createElement)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"}},(0,e.createElement)("p",{style:{fontSize:"14px",margin:"0px"}},(0,s.__)("We recommend making a complete backup of your WordPress site. This is just in case you ever need to revert changes.","wp-statistics")," ",(0,e.createElement)("a",{href:"#",style:{textDecoration:"underline"}},(0,s.__)("Learn how to back up your site","wp-statistics"))),(0,e.createElement)("p",{style:{fontSize:"14px",margin:"0px"}},(0,s.__)("Keep in mind the migration could take time. (anywhere from minutes to a few hours, depending on your site’s size and server resources).","wp-statistics")),(0,e.createElement)("p",{style:{fontSize:"14px",margin:"0px"}},(0,s.__)("You can pause, cancel, or restart the migration at any point. Your old data remains untouched until the process fully completes.","wp-statistics")))),(0,e.createElement)("p",{style:{fontSize:"16px"}},(0,s.__)("When you’re ready, simply choose your preferred migration option below and click Next. You’re in full control, and your data will remain safe every step of the way.","wp-statistics")),(0,e.createElement)(i.__experimentalHeading,{style:{fontFamily:500,fontSize:24,lineHeight:1.3,marginTop:32,marginBottom:16}},(0,s.__)("Choose Your Preferred Migration","wp-statistics")),(0,e.createElement)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"}},(0,e.createElement)(i.Card,{style:{border:"full-detailed"===r?"2px solid #1e87f0":"1px solid #ccc",borderRadius:8,padding:"24px",cursor:"pointer",boxShadow:"none"},onClick:()=>{n("full-detailed");const e={type:"full-detailed",title:(0,s.__)("Full Detailed Migration","wp-statistics"),description:(0,s.__)("Moves all your historical data—visitors, devices, referral sources, search engines, and more—into the new database structure.","wp-statistics"),estimatedTime:(0,s.__)("Depending on your site’s traffic history and server resources, this process can range from a few minutes to several hours.","wp-statistics"),whoFor:(0,s.__)("Users who want to preserve every bit of their analytics data without losing any detail.","wp-statistics")};l(e)}},(0,e.createElement)(i.CardBody,{style:{padding:"0px"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},(0,e.createElement)("p",{style:{fontSize:"14px",fontFamily:500,color:"#1E1E20",fontWeight:"700",margin:"0px"}},(0,s.__)("Full Detailed Migration","wp-statistics")),(0,e.createElement)("input",{type:"radio",id:"full-detailed",name:"full-detailed",value:"full-detailed",checked:"full-detailed"===r})),(0,e.createElement)("p",{style:{color:"#56585A"}},(0,s.__)("Moves all your historical data—visitors, devices, referral sources, search engines, and more—into the new database structure.","wp-statistics")),(0,e.createElement)("ul",{style:{listStyle:"disc",paddingLeft:"30px"}},(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Estimated Time:","wp-statistics"))," ",(0,s.__)("Depending on your site’s traffic history and server resources, this process can range from a few minutes to several hours.","wp-statistics")),(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Who It’s For:","wp-statistics"))," ",(0,s.__)("Users who want to preserve every bit of their analytics data without losing any detail.","wp-statistics"))))),(0,e.createElement)(i.Card,{style:{border:"summary-only"===r?"2px solid #1e87f0":"1px solid #ccc",borderRadius:8,padding:"24px",cursor:"pointer",boxShadow:"none"},onClick:()=>{n("summary-only");const e={type:"summary-only",title:(0,s.__)("Summary-Only Migration","wp-statistics"),description:(0,s.__)("Quickly transfers only the visitor counts and page-view totals for older data. You’ll lose detailed information (like devices, referrers, and search engines) for past visitors.","wp-statistics"),estimatedTime:(0,s.__)("Typically much faster than a full migration, often just a few minutes.","wp-statistics"),whoFor:(0,s.__)("Users who just need high-level trends and want the process done ASAP.","wp-statistics")};l(e)}},(0,e.createElement)(i.CardBody,{style:{padding:"0px"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},(0,e.createElement)("p",{style:{margin:"0px",fontSize:"14px",fontFamily:500,color:"#1E1E20",fontWeight:"700"}},(0,s.__)("Summary-Only Migration","wp-statistics")),(0,e.createElement)("input",{type:"radio",id:"summary-only",name:"summary-only",value:"summary-only",checked:"summary-only"===r})),(0,e.createElement)("p",{style:{color:"#56585A"}},(0,s.__)("Quickly transfers only the visitor counts and page-view totals for older data. You’ll lose detailed information (like devices, referrers, and search engines) for past visitors.","wp-statistics")),(0,e.createElement)("ul",{style:{listStyle:"disc",paddingLeft:"30px"}},(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Estimated Time:","wp-statistics"))," ",(0,s.__)("Typically much faster than a full migration, often just a few minutes.","wp-statistics")),(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Who It’s For:","wp-statistics"))," ",(0,s.__)("Users who just need high-level trends and want the process done ASAP.","wp-statistics")),(0,e.createElement)("li",null,(0,e.createElement)("a",null,(0,s.__)("Learn more about Summary-Only Migration","wp-statistics")))))),(0,e.createElement)(i.Card,{style:{border:"hybrid"===r?"2px solid #1e87f0":"1px solid #ccc",borderRadius:8,padding:"24px",cursor:"pointer",boxShadow:"none"},onClick:()=>{n("hybrid");const e={type:"hybrid",title:(0,s.__)("Hybrid Migration","wp-statistics"),description:(0,s.__)("Imports full, detailed stats for your most recent history—by default the last 90 days, while older data is brought in as summary-only.","wp-statistics"),estimatedTime:(0,s.__)("Longer than summary-only, but faster than a full detailed migration.","wp-statistics"),whoFor:(0,s.__)("Users who want to retain granular data for a recent timeframe while speeding up the migration for\u2028older records.","wp-statistics")};l(e)}},(0,e.createElement)(i.CardBody,{style:{padding:"0px"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},(0,e.createElement)("p",{style:{margin:"0px",fontSize:"14px",fontFamily:500,color:"#1E1E20",fontWeight:"700"}},(0,s.__)("Hybrid Migration","wp-statistics")),(0,e.createElement)("input",{type:"radio",id:"hybrid",name:"hybrid",value:"hybrid",checked:"hybrid"===r})),(0,e.createElement)("p",{style:{color:"#56585A"}},(0,s.__)("Imports full, detailed stats for your most recent history—by default the last 90 days, while older data is brought in as summary-only.","wp-statistics")),(0,e.createElement)("ul",{style:{listStyle:"disc",paddingLeft:"30px"}},(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Estimated Time:","wp-statistics"))," ",(0,s.__)("Longer than summary-only, but faster than a full detailed migration.","wp-statistics")),(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Who It’s For:","wp-statistics"))," ",(0,s.__)("Users who want to retain granular data for a recent timeframe while speeding up the migration for\u2028older records.","wp-statistics"))),(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},(0,e.createElement)("p",null,(0,s.__)("Enter the number of days to migrate with full detail:","wp-statistics")),(0,e.createElement)("input",{name:"hybrid-value",value:c,style:{outline:"none",border:"1px solid #DADCE0",width:"46px",height:"32px",borderRadius:"3px"},onChange:e=>d(e.target.value)})))))),(0,e.createElement)(i.CardFooter,{style:{display:"flex",justifyContent:"flex-end",paddingTop:"32px",paddingBottom:"32px"}},(0,e.createElement)("button",{style:{background:"#404BF2",outline:"none",border:"none",padding:"12px 16px",borderRadius:"4px",color:"white",cursor:"pointer"},onClick:()=>{"hybrid"==r?localStorage.setItem("wps_migration_option",JSON.stringify({...o,days:c})):localStorage.setItem("wps_migration_option",JSON.stringify(o)),a("step2")}},(0,s.__)("Next Step","wp-statistics"))))},r=({handleStep:a})=>{const[r,n]=(0,t.useState)({}),o=localStorage.getItem("wps_migration_option");return(0,t.useEffect)((()=>{o&&n(JSON.parse(o))}),[o]),(0,e.createElement)(i.Card,null,(0,e.createElement)(i.CardBody,null,(0,e.createElement)(i.__experimentalHeading,{style:{fontFamily:500,fontSize:"24px",lineHeight:1.3,marginTop:"8px",marginBottom:"16px"}},(0,s.__)("Confirmation Step","wp-statistics")),(0,e.createElement)(i.Card,{style:{border:"1px solid #EEEFF1",borderRadius:"8px",padding:"24px",cursor:"pointer",boxShadow:"none",background:"#FAFAFB"}},(0,e.createElement)(i.CardBody,{style:{padding:"0px"}},(0,e.createElement)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},(0,e.createElement)("p",{style:{fontSize:"14px",fontFamily:500,color:"#1E1E20",fontWeight:"700",margin:"0px"}},r?.title),(0,e.createElement)("input",{type:"radio",disabled:!0,id:"1",name:"migration-option",value:"1",checked:!0})),(0,e.createElement)("p",{style:{color:"#56585A"}},r?.description),(0,e.createElement)("ul",{style:{listStyle:"disc",paddingLeft:"30px"}},(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Estimated Time:","wp-statistics"))," ",r?.estimatedTime),(0,e.createElement)("li",null,(0,e.createElement)("strong",null,(0,s.__)("Who It’s For:","wp-statistics"))," ",r?.whoFor)))),(0,e.createElement)("div",{style:{display:"flex",gap:"10px",flexDirection:"column",marginTop:"28px"}},(0,e.createElement)("p",{style:{fontSize:"15px",margin:"0px"}},(0,e.createElement)("strong",null,(0,s.__)("What’s Next?","wp-statistics"))," ",(0,s.__)("We’ll migrate all of your historical data—visitors, devices, search engines, referrers, and more—into the new database structure.","wp-statistics")),(0,e.createElement)("p",{style:{fontSize:"15px"}},(0,e.createElement)("strong",null,(0,s.__)("What’s Migrated?","wp-statistics"))," ",(0,s.__)("Absolutely everything from your past analytics, so you retain complete visibility into your site’s historical data.","wp-statistics")),(0,e.createElement)("p",{style:{fontSize:"15px",margin:"0px"}},(0,e.createElement)("strong",null,(0,s.__)("What’s Lost?","wp-statistics"))," ",(0,s.__)("Nothing! All detailed stats will be preserved.","wp-statistics")),(0,e.createElement)("p",{style:{fontSize:"15px",margin:"0px"}},(0,e.createElement)("strong",null,(0,s.__)("Estimated Time:","wp-statistics"))," ",(0,s.__)("Depending on the size of your site and server performance, it can take anywhere from minutes to a few hours.","wp-statistics")),(0,e.createElement)("div",{style:{padding:"15px 0px"}},(0,e.createElement)("p",{style:{fontSize:"15px"}},(0,e.createElement)("strong",null,(0,s.__)("Regardless of the choice,","wp-statistics"))," ",(0,s.__)("you could also include these reminders at the bottom of the confirmation step:","wp-statistics")),(0,e.createElement)("ul",{style:{listStyle:"disc",paddingLeft:"22px",margin:"5px 0px"}},(0,e.createElement)("li",{style:{fontSize:"14px"}},(0,s.__)("You can pause, cancel, or restart the migration at any time.","wp-statistics")),(0,e.createElement)("li",{style:{fontSize:"14px"}},(0,s.__)("Nothing is deleted from your old data source until the migration is fully complete.","wp-statistics")),(0,e.createElement)("li",null,(0,e.createElement)("p",{style:{fontSize:"14px"}},(0,s.__)("Need more details or help?","wp-statistics")," ",(0,e.createElement)("a",{href:""},(0,s.__)("Check our Migration FAQs or contact support.","wp-statistics")))))))),(0,e.createElement)(i.CardFooter,{style:{flexDirection:"column"}},(0,e.createElement)("div",null,(0,e.createElement)("p",{style:{fontWeight:"500",fontSize:"16px",marginBottom:"0px"}},(0,s.__)("Ready to proceed?","wp-statistics")),(0,e.createElement)("p",{style:{fontWeight:"400",fontSize:"14px",color:"#56585A",margin:"0px"}},(0,s.__)("You can","wp-statistics")," ",(0,e.createElement)("span",{style:{fontWeight:"500",color:"#000"}},(0,s.__)("go back","wp-statistics"))," ",(0,s.__)("to change the number of days or pick a different migration method. Or, click","wp-statistics")," ",(0,e.createElement)("span",{style:{fontWeight:"500",color:"#000"}},(0,s.__)("Start Migration","wp-statistics"))," ",(0,s.__)("to begin.","wp-statistics"))),(0,e.createElement)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"10px 0px"}},(0,e.createElement)("p",{style:{cursor:"pointer"},onClick:()=>a("step1")},(0,s.__)("< Go Back","wp-statistics")),(0,e.createElement)("button",{style:{background:"#404BF2",outline:"none",border:"none",padding:"12px 16px",borderRadius:"4px",color:"white",cursor:"pointer"},onClick:()=>a("step3")},(0,s.__)("Start Migration","wp-statistics")))))},n=({handleStep:t})=>{const a=[{id:1,name:(0,s.__)("Visitor Records","wp-statistics"),status:"Completed",records:(0,s.__)("5,200 records migrated","wp-statistics")},{id:2,name:(0,s.__)("Page Views Data","wp-statistics"),status:"Completed",records:(0,s.__)("12,300 records migrated","wp-statistics")},{id:3,name:(0,s.__)("Geo-Location Data","wp-statistics"),status:"In Progress",progressText:(0,s.__)(" (next)","wp-statistics"),records:(0,s.__)("4,100 of 10,000 completed","wp-statistics"),isBold:!0},{id:4,name:(0,s.__)("Referral Traffic","wp-statistics"),status:"Pending",records:(0,s.__)("0 of 8,400 completed","wp-statistics")},{id:5,name:(0,s.__)("Author Performance Data","wp-statistics"),status:"Pending",records:(0,s.__)("0 of 2,000 completed","wp-statistics")}],r={backgroundColor:"#f8f9fa",color:"#6c757d",textAlign:"left",padding:"12px 15px",fontWeight:600,borderBottom:"1px solid #e0e0e0"},n={padding:"12px 15px",borderBottom:"1px solid #eef2f7",verticalAlign:"middle",background:"white"},o={marginRight:"5px"};return(0,e.createElement)(i.Card,{style:{width:window.innerWidth<=768?"100%":774}},(0,e.createElement)(i.CardBody,null,(0,e.createElement)(i.__experimentalHeading,{style:{fontWeight:500,fontSize:"18px",lineHeight:1.3,marginTop:"8px",marginBottom:"16px"}},(0,s.__)("Overall Progress","wp-statistics")),(0,e.createElement)("div",null,(0,e.createElement)("h4",{style:{fontWeight:500,fontSize:"16px",marginBottom:"10px"}},(0,s.__)("100%","wp-statistics")," ",(0,s.__)("Completed","wp-statistics")),(0,e.createElement)("div",{style:{height:"5px",borderRadius:"24px",background:"#E7E7E8",width:"100%"}},(0,e.createElement)("div",{style:{height:"5px",borderRadius:"24px",background:"#019939",width:"100%"}}))),(0,e.createElement)("div",{style:{border:"2px solid #eef2f7",borderRadius:"8px",margin:"24px 0px"}},(0,e.createElement)("table",{style:{width:"100%",borderCollapse:"collapse",overflow:"hidden",borderRadius:"8px"}},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{style:r},(0,s.__)("Task Name","wp-statistics")),(0,e.createElement)("th",{style:r},(0,s.__)("Status","wp-statistics")),(0,e.createElement)("th",{style:r},(0,s.__)("Records","wp-statistics")))),(0,e.createElement)("tbody",null,a.map(((t,i)=>{const r=((e,t="")=>{switch(e){case"Completed":return{icon:"✅",text:(0,s.__)("Completed","wp-statistics")};case"In Progress":return{icon:"🔄",text:`${(0,s.__)("In Progress","wp-statistics")} ${t}`.trim()};case"Pending":return{icon:"⏳",text:(0,s.__)("Pending","wp-statistics")};default:return{icon:"",text:e}}})(t.status,t.progressText),l=i===a.length-1,c={...{...n,borderBottom:l?"none":n.borderBottom},color:"#333",fontWeight:t.isBold?600:"normal"};return(0,e.createElement)("tr",{key:t.id},(0,e.createElement)("td",{style:c},t.name),(0,e.createElement)("td",{style:c},(0,e.createElement)("span",{style:o},r.icon),r.text),(0,e.createElement)("td",{style:c},t.records))}))))),!1,(0,e.createElement)("div",{style:{maxWidth:"600px",marginTop:"40px",marginBottom:"20px",color:"#333"}},(0,e.createElement)(i.__experimentalHeading,{style:{fontSize:"1.2em",fontWeight:"bold",marginBottom:"10px"}},(0,e.createElement)("span",{style:{marginRight:"5px"}},"🎉")," ",(0,s.__)("Migration Completed Successfully!","wp-statistics")),(0,e.createElement)("p",{style:{fontSize:"15px",color:"#0C0C0D",margin:"0px"}},(0,s.__)("All your historical data has been successfully migrated!","wp-statistics")),(0,e.createElement)("p",{style:{fontSize:"15px",color:"#56585A",margin:"0px"}},(0,s.__)("You can now take full advantage of WP Statistics' new structure.","wp-statistics")),(0,e.createElement)("p",{style:{fontWeight:"bold",marginBottom:"2px",marginTop:"8px",fontSize:"15px"}},(0,s.__)("Next Steps:","wp-statistics")),(0,e.createElement)("ul",{style:{listStyleType:"disc",marginLeft:"20px",paddingLeft:"20px",color:"#555",lineHeight:1.6,margin:0}},(0,e.createElement)("li",{style:{marginBottom:"5px",color:"#56585A",fontSize:"15px"}},(0,s.__)("Check out your updated stats in the","wp-statistics")," ",(0,e.createElement)("a",{href:"#",style:{color:"#0073aa",textDecoration:"underline"}},(0,s.__)("WP Statistics Dashboard","wp-statistics")),"."),(0,e.createElement)("li",{style:{marginBottom:"5px",color:"#56585A",fontSize:"15px"}},(0,s.__)("If you have any questions, visit our","wp-statistics")," ",(0,e.createElement)("a",{href:"#",style:{color:"#0073aa",textDecoration:"underline"}},(0,s.__)("Migration FAQs","wp-statistics"))," ",(0,s.__)("or","wp-statistics")," ",(0,e.createElement)("a",{href:"#",style:{color:"#0073aa",textDecoration:"underline"}},(0,s.__)("contact support","wp-statistics")),".")))),!1)},o=()=>new URLSearchParams(window.location.search).get("step")||"step1",l=()=>{const[i,s]=(0,t.useState)(o()),l=e=>{const t=new URL(window.location.href);t.searchParams.set("step",e),window.history.pushState({},"",t),s(e)};return(0,t.useEffect)((()=>{const e=()=>{s(o())};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),(0,e.createElement)("div",{className:"wps-wrap",style:{maxWidth:window.innerWidth<=768?"100%":774}},"step1"===i&&(0,e.createElement)(a,{handleStep:l}),"step2"===i&&(0,e.createElement)(r,{handleStep:l}),"step3"===i&&(0,e.createElement)(n,{handleStep:l}))};document.addEventListener("DOMContentLoaded",(()=>{const i=document.getElementById("wps-data-migration-page");i&&(0,t.render)((0,e.createElement)(l,null),i)}))})();