if (wps_js.isset(wps_js.global, 'request_params', 'page') && wps_js.global.request_params.page === "geographic") {
    const wpsVectorMap= document.getElementById('wp-statistics-visitors-map')
   
    if(wpsVectorMap){
        const mapData={
            "labels": [
                "Andorra",
                "United Arab Emirates",
                "Afghanistan",
                "Albania",
                "Armenia",
                "Angola",
                "Argentina",
                "American Samoa",
                "Austria",
                "Australia",
                "Aruba",
                "Åland Islands",
                "Azerbaijan",
                "Bosnia and Herzegovina",
                "Barbados",
                "Bangladesh",
                "Belgium",
                "Burkina Faso",
                "Bulgaria",
                "Bahrain",
                "Benin",
                "Brunei Darussalam",
                "Bolivia, Plurinational State of",
                "British Antarctic Territory",
                "Brazil",
                "Botswana",
                "Belarus",
                "Belize",
                "Canada",
                "Congo (the Democratic Republic of the)",
                "Congo",
                "Switzerland",
                "Côte d’Ivoire",
                "Chile",
                "Cameroon",
                "China",
                "Colombia",
                "Costa Rica",
                "Cuba",
                "Cape Verde",
                "Curaçao",
                "Cyprus",
                "Czech Republic",
                "Germany",
                "Denmark",
                "Dominican Republic",
                "Algeria",
                "Ecuador",
                "Estonia",
                "Egypt",
                "Spain",
                "Ethiopia",
                "Finland",
                "Fiji",
                "Faroe Islands",
                "France",
                "Gabon",
                "United Kingdom",
                "Grenada",
                "Georgia",
                "French Guiana",
                "Ghana",
                "Gibraltar",
                "Gambia",
                "Guinea",
                "Guadeloupe",
                "Equatorial Guinea",
                "Greece",
                "Guatemala",
                "Guam",
                "Guinea-Bissau",
                "Hong Kong",
                "Honduras",
                "Croatia",
                "Haiti",
                "Hungary",
                "Indonesia",
                "Ireland",
                "Israel",
                "India",
                "Iraq",
                "Iran",
                "Iceland",
                "Italy",
                "Jersey",
                "Jamaica",
                "Jordan",
                "Japan",
                "Kenya",
                "Kyrgyzstan",
                "Cambodia",
                "Saint Kitts and Nevis",
                "Korea (the Republic of)",
                "Kuwait",
                "Kazakhstan",
                "Lao People's Democratic Republic",
                "Lebanon",
                "Saint Lucia",
                "Liechtenstein",
                "Sri Lanka",
                "Liberia",
                "Lithuania",
                "Luxembourg",
                "Latvia",
                "Libya",
                "Morocco",
                "Monaco",
                "Moldova (the Republic of)",
                "Montenegro",
                "Madagascar",
                "Macedonia (the former Yugoslav Republic of)",
                "Mali",
                "Myanmar",
                "Mongolia",
                "Macao",
                "Martinique",
                "Malta",
                "Mauritius",
                "Maldives",
                "Malawi",
                "Mexico",
                "Malaysia",
                "Mozambique",
                "Namibia",
                "New Caledonia",
                "Niger",
                "Nigeria",
                "Nicaragua",
                "Netherlands",
                "Norway",
                "Nepal",
                "New Zealand",
                "Oman",
                "Panama",
                "Peru",
                "French Polynesia",
                "Papua New Guinea",
                "Philippines",
                "Pakistan",
                "Poland",
                "Puerto Rico",
                "Palestine, State of",
                "Portugal",
                "Paraguay",
                "Qatar",
                "Réunion",
                "Romania",
                "Serbia",
                "Russian Federation",
                "Rwanda",
                "Saudi Arabia",
                "Solomon Islands",
                "Seychelles",
                "Sudan",
                "Sweden",
                "Singapore",
                "Slovenia",
                "Slovakia",
                "Sierra Leone",
                "Senegal",
                "Somalia",
                "Suriname",
                "El Salvador",
                "Syrian Arab Republic",
                "Swaziland",
                "Turks and Caicos Islands",
                "Togo",
                "Thailand",
                "Tajikistan",
                "Tunisia",
                "Tonga",
                "Turkey",
                "Trinidad and Tobago",
                "Taiwan",
                "Tanzania, United Republic of",
                "Ukraine",
                "Uganda",
                "United States",
                "Uruguay",
                "Uzbekistan",
                "Saint Vincent and the Grenadines",
                "Venezuela, Bolivarian Republic of ",
                "Virgin Islands (U.S.)",
                "Viet Nam",
                "Vanuatu",
                "Kosovo",
                "Yemen",
                "South Africa",
                "Zambia",
                "Zimbabwe"
            ],
            "codes": [
                "AD",
                "AE",
                "AF",
                "AL",
                "AM",
                "AO",
                "AR",
                "AS",
                "AT",
                "AU",
                "AW",
                "AX",
                "AZ",
                "BA",
                "BB",
                "BD",
                "BE",
                "BF",
                "BG",
                "BH",
                "BJ",
                "BN",
                "BO",
                "BQ",
                "BR",
                "BW",
                "BY",
                "BZ",
                "CA",
                "CD",
                "CG",
                "CH",
                "CI",
                "CL",
                "CM",
                "CN",
                "CO",
                "CR",
                "CU",
                "CV",
                "CW",
                "CY",
                "CZ",
                "DE",
                "DK",
                "DO",
                "DZ",
                "EC",
                "EE",
                "EG",
                "ES",
                "ET",
                "FI",
                "FJ",
                "FO",
                "FR",
                "GA",
                "GB",
                "GD",
                "GE",
                "GF",
                "GH",
                "GI",
                "GM",
                "GN",
                "GP",
                "GQ",
                "GR",
                "GT",
                "GU",
                "GW",
                "HK",
                "HN",
                "HR",
                "HT",
                "HU",
                "ID",
                "IE",
                "IL",
                "IN",
                "IQ",
                "IR",
                "IS",
                "IT",
                "JE",
                "JM",
                "JO",
                "JP",
                "KE",
                "KG",
                "KH",
                "KN",
                "KR",
                "KW",
                "KZ",
                "LA",
                "LB",
                "LC",
                "LI",
                "LK",
                "LR",
                "LT",
                "LU",
                "LV",
                "LY",
                "MA",
                "MC",
                "MD",
                "ME",
                "MG",
                "MK",
                "ML",
                "MM",
                "MN",
                "MO",
                "MQ",
                "MT",
                "MU",
                "MV",
                "MW",
                "MX",
                "MY",
                "MZ",
                "NA",
                "NC",
                "NE",
                "NG",
                "NI",
                "NL",
                "NO",
                "NP",
                "NZ",
                "OM",
                "PA",
                "PE",
                "PF",
                "PG",
                "PH",
                "PK",
                "PL",
                "PR",
                "PS",
                "PT",
                "PY",
                "QA",
                "RE",
                "RO",
                "RS",
                "RU",
                "RW",
                "SA",
                "SB",
                "SC",
                "SD",
                "SE",
                "SG",
                "SI",
                "SK",
                "SL",
                "SN",
                "SO",
                "SR",
                "SV",
                "SY",
                "SZ",
                "TC",
                "TG",
                "TH",
                "TJ",
                "TN",
                "TO",
                "TR",
                "TT",
                "TW",
                "TZ",
                "UA",
                "UG",
                "US",
                "UY",
                "UZ",
                "VC",
                "VE",
                "VI",
                "VN",
                "VU",
                "XK",
                "YE",
                "ZA",
                "ZM",
                "ZW"
            ],
            "flags": [
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ad.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ae.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/af.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/al.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/am.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ao.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ar.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/as.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/at.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/au.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/aw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ax.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/az.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ba.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bb.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bd.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/be.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bf.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bh.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bj.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bo.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bq.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/br.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/by.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/bz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ca.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cd.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ch.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ci.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cl.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cm.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/co.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cu.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cv.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cy.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/cz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/de.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/dk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/do.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/dz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ec.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ee.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/eg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/es.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/et.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/fi.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/fj.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/fo.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/fr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ga.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gb.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gd.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ge.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gf.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gh.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gi.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gm.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gp.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gq.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gt.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gu.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/gw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/hk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/hn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/hr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ht.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/hu.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/id.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ie.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/il.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/in.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/iq.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ir.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/is.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/it.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/je.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/jm.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/jo.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/jp.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ke.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/kg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/kh.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/kn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/kr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/kw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/kz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/la.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lb.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lc.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/li.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lt.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lu.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/lv.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ly.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ma.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mc.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/md.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/me.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ml.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mm.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mo.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mq.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mt.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mu.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mv.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mx.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/my.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/mz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/na.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/nc.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ne.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ng.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ni.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/nl.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/no.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/np.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/nz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/om.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pa.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pe.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pf.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ph.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pl.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ps.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/pt.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/py.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/qa.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/re.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ro.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/rs.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ru.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/rw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sa.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sb.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sc.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sd.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/se.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/si.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sl.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/so.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sv.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sy.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/sz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tc.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tg.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/th.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tj.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/to.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tr.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tt.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tw.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/tz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ua.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ug.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/us.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/uy.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/uz.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/vc.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ve.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/vi.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/vn.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/vu.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/xk.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/ye.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/za.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/zm.svg",
                "http://statistics.localhost/wp-content/plugins/wp-statistics/assets/images/flags/zw.svg"
            ],
            "data": [
                "6",
                "144",
                "9",
                "36",
                "24",
                "5",
                "224",
                "1",
                "838",
                "505",
                "5",
                "2",
                "15",
                "51",
                "4",
                "251",
                "394",
                "19",
                "172",
                "7",
                "26",
                "2",
                "17",
                "1",
                "579",
                "2",
                "44",
                "4",
                "893",
                "13",
                "3",
                "1,085",
                "14",
                "176",
                "15",
                "727",
                "232",
                "33",
                "23",
                "4",
                "1",
                "41",
                "466",
                "6,478",
                "476",
                "59",
                "76",
                "49",
                "144",
                "263",
                "1,592",
                "255",
                "556",
                "1",
                "4",
                "2,731",
                "1",
                "1,695",
                "4",
                "22",
                "5",
                "33",
                "2",
                "1",
                "4",
                "8",
                "3",
                "340",
                "33",
                "1",
                "2",
                "357",
                "13",
                "155",
                "8",
                "385",
                "616",
                "428",
                "140",
                "1,070",
                "51",
                "3,250",
                "15",
                "1,474",
                "2",
                "10",
                "44",
                "1,688",
                "75",
                "7",
                "33",
                "1",
                "467",
                "13",
                "15",
                "7",
                "17",
                "2",
                "2",
                "36",
                "5",
                "113",
                "45",
                "83",
                "6",
                "210",
                "2",
                "41",
                "6",
                "7",
                "36",
                "10",
                "16",
                "6",
                "3",
                "2",
                "18",
                "10",
                "2",
                "2",
                "338",
                "212",
                "9",
                "8",
                "3",
                "1",
                "224",
                "10",
                "2,546",
                "219",
                "68",
                "110",
                "18",
                "31",
                "93",
                "6",
                "3",
                "181",
                "329",
                "1,550",
                "17",
                "12",
                "258",
                "23",
                "8",
                "16",
                "357",
                "113",
                "291",
                "17",
                "104",
                "3",
                "6",
                "7",
                "724",
                "323",
                "87",
                "189",
                "3",
                "10",
                "10",
                "6",
                "13",
                "10",
                "4",
                "1",
                "17",
                "342",
                "2",
                "67",
                "1",
                "478",
                "7",
                "274",
                "15",
                "236",
                "25",
                "5,675",
                "36",
                "23",
                "1",
                "55",
                "1",
                "469",
                "3",
                "10",
                "17",
                "235",
                "8",
                "10"
            ],
            "raw_data": [
                "6",
                "144",
                "9",
                "36",
                "24",
                "5",
                "224",
                "1",
                "838",
                "505",
                "5",
                "2",
                "15",
                "51",
                "4",
                "251",
                "394",
                "19",
                "172",
                "7",
                "26",
                "2",
                "17",
                "1",
                "579",
                "2",
                "44",
                "4",
                "893",
                "13",
                "3",
                "1085",
                "14",
                "176",
                "15",
                "727",
                "232",
                "33",
                "23",
                "4",
                "1",
                "41",
                "466",
                "6478",
                "476",
                "59",
                "76",
                "49",
                "144",
                "263",
                "1592",
                "255",
                "556",
                "1",
                "4",
                "2731",
                "1",
                "1695",
                "4",
                "22",
                "5",
                "33",
                "2",
                "1",
                "4",
                "8",
                "3",
                "340",
                "33",
                "1",
                "2",
                "357",
                "13",
                "155",
                "8",
                "385",
                "616",
                "428",
                "140",
                "1070",
                "51",
                "3250",
                "15",
                "1474",
                "2",
                "10",
                "44",
                "1688",
                "75",
                "7",
                "33",
                "1",
                "467",
                "13",
                "15",
                "7",
                "17",
                "2",
                "2",
                "36",
                "5",
                "113",
                "45",
                "83",
                "6",
                "210",
                "2",
                "41",
                "6",
                "7",
                "36",
                "10",
                "16",
                "6",
                "3",
                "2",
                "18",
                "10",
                "2",
                "2",
                "338",
                "212",
                "9",
                "8",
                "3",
                "1",
                "224",
                "10",
                "2546",
                "219",
                "68",
                "110",
                "18",
                "31",
                "93",
                "6",
                "3",
                "181",
                "329",
                "1550",
                "17",
                "12",
                "258",
                "23",
                "8",
                "16",
                "357",
                "113",
                "291",
                "17",
                "104",
                "3",
                "6",
                "7",
                "724",
                "323",
                "87",
                "189",
                "3",
                "10",
                "10",
                "6",
                "13",
                "10",
                "4",
                "1",
                "17",
                "342",
                "2",
                "67",
                "1",
                "478",
                "7",
                "274",
                "15",
                "236",
                "25",
                "5675",
                "36",
                "23",
                "1",
                "55",
                "1",
                "469",
                "3",
                "10",
                "17",
                "235",
                "8",
                "10"
            ]
        }
        let pin = Array();
        let colors = {};

        if (mapData?.codes?.length > 0) {
            const geoCountryData = {};
            mapData.codes.forEach((code, index) => {
                const visitors_raw = Number(mapData.raw_data[index]) || 0;
                const visitors = mapData.data[index];
                geoCountryData[code.toLowerCase()] = {
                    label: mapData.labels[index],
                    flag: mapData.flags[index],
                    visitors_raw,
                    visitors
                };
            });

            const maxVisitors = Math.max(1, ...Object.values(geoCountryData).map(country => country.visitors_raw));

            Object.keys(geoCountryData).forEach(code => {
                const country = geoCountryData[code];

                const intensity = country.visitors_raw / maxVisitors;
                // #EBF5FF to #3288D7
                const r = Math.round(235 - (185 * intensity));  // From 235 to 50
                const g = Math.round(245 - (109 * intensity));  // From 245 to 136
                const b = Math.round(255 - (40 * intensity));   // From 255 to 215

                colors[code] = `rgb(${r}, ${g}, ${b})`;

                pin[code] = `<div class='map-html-marker'>
                    <div class="map-country-header">
                        <img src='${country.flag}' 
                            alt="${country.label}" 
                            title='${country.label}' 
                            class='log-tools wps-flag'/> 
                            <span>${country.label}  </span>
                    </div>
                    <div class="map-country-content">
                        <div>${wps_js._('visitors')}</div>
                        <div>${country.visitors}</div>
                    </div>
                </div>`;
            });
        }
        
        jQuery('#wp-statistics-visitors-map').vectorMap({
            map: 'world_en',
            backgroundColor: '#fff',
            borderColor: '#fff',
            borderOpacity: 0.6,
            color: '#e6e6e6',
            selectedColor: '#596773',
            hoverColor: '#596773',


            colors: colors,
            onLabelShow: function (element, label, code) {
                const lowerCode = code.toLowerCase();
                if (pin[lowerCode]) {
                    label.html(pin[lowerCode]);
                    return;
                }

                const imageUrl = `${wps_js.global.assets_url}/images/flags/${lowerCode}.svg`;
                const countryName = label.text();  

                fetch(imageUrl)
                    .then(response => {
                        const flagImage = response.ok
                            ? `<img src='${imageUrl}' alt="${countryName}" title="${countryName}" class='log-tools wps-flag'/>`
                            : '';

                        label.html(`
                <div class='map-html-marker'>
                    <div class="map-country-header">
                        ${flagImage}
                        <span>${countryName}</span>
                    </div>
                    <div class="map-country-content">
                        <div>${wps_js._('visitors')}</div>
                        <div>0</div>
                    </div>
                </div>
            `);
                    })
                    .catch(error => {
                        console.error('Error fetching the image:', error);

                        label.html(`
                <div class='map-html-marker'>
                    <div class="map-country-header">
                        <span>${countryName}</span>
                    </div>
                    <div class="map-country-content">
                        <div>${wps_js._('visitors')}</div>
                        <div>0</div>
                    </div>
                </div>
            `);
                    });
            },
        });
    }

    const renderHorizontalChart=(id,data)=> {
        const chartElement = document.getElementById(id);
        if (chartElement) {
            const parentElement = jQuery(`#${id}`).parent();
            if (!data.data || data.data.length === 0) {
                parentElement.html(wps_js.no_results());
            } else {
                wps_js.horizontal_bar(id, data.labels, data.data, data.icons);
            }
        }
    }

    wps_js.render_wp_statistics_hitsmap_widget()
    const topCountries = {
        "data": [
            4934,
            4233,
            2670,
            2198,
            1998
        ],
        "labels": [
            "Germany",
            "United States",
            "Iran",
            "France",
            "Netherlands"
        ],
        "icons": [
            "images/flags/de.svg",
            "images/flags/us.svg",
            "images/flags/ir.svg",
            "images/flags/fr.svg",
            "images/flags/nl.svg"
        ]
    };
    renderHorizontalChart('geographic--top-countries', topCountries);

    const visitorsContinent = {
        "data": [
            4934,
            4233,
            2670,
        ],
        "labels": [
            "Europe",
            "Asia",
            "North America",
        ]
    };
    renderHorizontalChart('geographic-visitors-continent', visitorsContinent);
}