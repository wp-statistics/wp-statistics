let WP_Statistics_CheckTime=WP_Statistics_Tracker_Object.jsCheckTime,WP_Statistics_Dnd_Active=parseInt(navigator.msDoNotTrack||window.doNotTrack||navigator.doNotTrack,10),hasTrackerInitializedOnce=!1,wpStatisticsUserSession={hitRequestSuccessful:!0,init:function(){hasTrackerInitializedOnce||(hasTrackerInitializedOnce=!0,WP_Statistics_Tracker_Object.option.isPreview)||("undefined"==typeof WP_Statistics_Tracker_Object?console.error("WP Statistics: Variable WP_Statistics_Tracker_Object not found. Ensure /wp-content/plugins/wp-statistics/assets/js/tracker.js is either excluded from cache settings or not dequeued by any plugin. Clear your cache if necessary."):(this.checkHitRequestConditions(),WP_Statistics_Tracker_Object.option.userOnline&&this.keepUserOnline()))},base64Encode:function(t){t=(new TextEncoder).encode(t);return btoa(String.fromCharCode.apply(null,t))},getPathAndQueryString:function(){var t=window.location.pathname,e=window.location.search;return this.base64Encode(t+e)},getReferred:function(){return this.base64Encode(document.referrer)},checkHitRequestConditions:function(){!WP_Statistics_Tracker_Object.option.dntEnabled||1!==WP_Statistics_Dnd_Active?this.sendHitRequest():console.log("WP Statistics: Do Not Track (DNT) is enabled. Hit request not sent.")},sendHitRequest:async function(){try{var t=this.getRequestUrl("hit"),e=new URLSearchParams({...WP_Statistics_Tracker_Object.hitParams,referred:this.getReferred(),page_uri:this.getPathAndQueryString()}).toString();const s=new XMLHttpRequest;s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(e),s.onreadystatechange=function(){var t;4===s.readyState&&(200===s.status?(t=JSON.parse(s.responseText),this.hitRequestSuccessful=!1!==t.status):(this.hitRequestSuccessful=!1,console.warn("WP Statistics: Hit request failed with status "+s.status)))}.bind(this)}catch(t){this.hitRequestSuccessful=!1,console.error("WP Statistics: Error sending hit request:",t)}},sendOnlineUserRequest:async function(){if(this.hitRequestSuccessful)try{var t=this.getRequestUrl("online"),e=new URLSearchParams({...WP_Statistics_Tracker_Object.onlineParams,referred:this.getReferred(),page_uri:this.getPathAndQueryString()}).toString(),s=new XMLHttpRequest;s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(e)}catch(t){console.error("WP Statistics: Error sending online user request:",t)}},keepUserOnline:function(){let e;if(WP_Statistics_Tracker_Object.option.userOnline){const s=setInterval(function(){(!WP_Statistics_Tracker_Object.option.dntEnabled||WP_Statistics_Tracker_Object.option.dntEnabled&&1!==WP_Statistics_Dnd_Active)&&this.hitRequestSuccessful&&this.sendOnlineUserRequest()}.bind(this),WP_Statistics_CheckTime);["click","keypress","scroll","DOMContentLoaded"].forEach(t=>{window.addEventListener(t,()=>{clearTimeout(e),e=setTimeout(()=>{clearInterval(s)},18e5)})})}},getRequestUrl:function(t){let e=WP_Statistics_Tracker_Object.requestUrl+"/";return WP_Statistics_Tracker_Object.option.bypassAdBlockers?e=WP_Statistics_Tracker_Object.ajaxUrl:"hit"===t?e+=WP_Statistics_Tracker_Object.hitParams.endpoint:"online"===t&&(e+=WP_Statistics_Tracker_Object.onlineParams.endpoint),e}};function handleWpConsentApiIntegration(){const i=WP_Statistics_Tracker_Object.option.consentIntegration.status.consent_level;(WP_Statistics_Tracker_Object.option.trackAnonymously||"disabled"==i||wp_has_consent(i))&&wpStatisticsUserSession.init(),document.addEventListener("wp_listen_for_consent_change",function(t){var e,s=t.detail;for(e in s)s.hasOwnProperty(e)&&e===i&&"allow"===s[e]&&(wpStatisticsUserSession.init(),WP_Statistics_Tracker_Object.option.trackAnonymously)&&wpStatisticsUserSession.checkHitRequestConditions()})}function handleRealCookieBannerIntegration(){WP_Statistics_Tracker_Object.option.trackAnonymously&&wpStatisticsUserSession.init(),(window.consentApi?.consent("wp-statistics")||Promise.resolve()).then(()=>{console.log("wp-statistics consent is given."),(window.consentApi?.consent("wp-statistics-with-data-processing")||Promise.resolve()).then(()=>{console.log("wp-statistics-with-data-processing consent is given."),wpStatisticsUserSession.init()}).catch(()=>{console.log("wp-statistics-with-data-processing consent is NOT given.")})}).catch(()=>{console.log("wp-statistics consent is NOT given.")})}document.addEventListener("DOMContentLoaded",function(){var t=WP_Statistics_Tracker_Object.option.consentIntegration.name;t||wpStatisticsUserSession.init(),"wp_consent_api"===t&&handleWpConsentApiIntegration(),"real_cookie_banner"===t&&handleRealCookieBannerIntegration()});