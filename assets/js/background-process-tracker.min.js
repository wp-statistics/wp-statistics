"use strict";jQuery(document).ready(function(t){var e={intervalMs:"undefined"!=typeof Wp_Statistics_Async_Background_Process_Data&&Wp_Statistics_Async_Background_Process_Data.interval||5e3,migrationNotice:null,processedElement:null,precentElement:null,timer:null,isActive:!0,currentProcess:null,init:function(){"undefined"==typeof Wp_Statistics_Async_Background_Process_Data?console.error("Wp_Statistics_Async_Background_Process_Data is not defined"):(this.currentProcess=Wp_Statistics_Async_Background_Process_Data.current_process,this.currentProcess&&(this.migrationNotice=jQuery("#wp-statistics-async-background-process-notice"),this.bindEvents()))},bindEvents:function(){var t;this.migrationNotice&&this.migrationNotice.length&&(this.processedElement=this.migrationNotice.find(".processed").first(),this.precentElement=this.migrationNotice.find(".percentage").first(),(t=this).timer&&clearInterval(this.timer),this.timer=setInterval(function(){t.updateProgress()},this.intervalMs))},updateProgress:function(){this.isActive&&jQuery.ajax({url:Wp_Statistics_Async_Background_Process_Data.ajax_url,method:"POST",data:{action:"wp_statistics_async_background_process",wps_nonce:Wp_Statistics_Async_Background_Process_Data.rest_api_nonce,current_process:this.currentProcess},success:function(t){t.data.completed?e.markAsCompleted():(e.updatePercent(t.data.percentage),e.updateProcessed(t.data.processed))},error:function(t,e,s){console.error("AJAX request error:",e,s)}})},markAsCompleted:function(){var t,e;this.migrationNotice.length&&(this.migrationNotice.closest(".notice").removeClass("notice-info").addClass("notice-success"),e=Wp_Statistics_Async_Background_Process_Data.completed_message,null!=(t=Wp_Statistics_Async_Background_Process_Data)&&t.job_completed_message&&(e=Wp_Statistics_Async_Background_Process_Data.job_completed_message),this.migrationNotice.html("<p><strong>".concat(e,"</strong></p>"))),this.isActive=!1},updatePercent:function(t){this.precentElement&&this.precentElement.length&&this.precentElement.text(t+"%")},updateProcessed:function(t){this.processedElement&&this.processedElement.length&&this.processedElement.text(t)}};jQuery(document).ready(function(){e.init()})});